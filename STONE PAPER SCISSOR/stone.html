<!DOCTYPE html>
<html lang="en">
<head>
  <title>SPG</title>
  <style>
    body {
      
      text-align: center;
      font-size: larger;
      margin-top: 80px;
    }
    .bu-on {
      padding: 15px;
      border: none;
      margin: 5px;
      font-size: medium;
      background-color: rgb(253, 221, 12);
      border-radius: 100px;
    }
    .bu-tt{
      border-radius: 100px;
      
    }
    .bu-on:hover {
      background-color: aqua;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>STONE PAPER SCISSOR GAME</h1>
  
  <button class="bu-on" onclick="
    let computerChoice = generateComputerChoice();
    let resultMsg = getResult('Stone', computerChoice);
    showResult('Stone', computerChoice, resultMsg);
  "><img src="stone.png" width="200" height="200" class="bu-tt"  alt="Stone image">
</button>

  <button class="bu-on" onclick="
    let computerChoice = generateComputerChoice();
    let resultMsg = getResult('Paper', computerChoice);
    showResult('Paper', computerChoice, resultMsg);
  "><img src="paper.png" width="200" height="200" class="bu-tt" alt="Stone image">
</button>

  <button class="bu-on" onclick="
    let computerChoice = generateComputerChoice();
    let resultMsg = getResult('Scissor', computerChoice);
    showResult('Scissor', computerChoice, resultMsg);
  "><img src="scissor.png" width="200" height="200" class="bu-tt" alt="Stone image">
</button>

 

  <h3 id="user-move"></h3>
  <h3 id="computer-move"></h3>
  <h3 id="result"></h3>
  <h3 id="score"></h3>

   <button class="bu-on" onclick="
    score = {
      win: 0,
      lost: 0,
      tie: 0,
      displayScore: function () {
        return `Score : Won: ${this.win}, Lost: ${this.lost}, Tie: ${this.tie}`;
      }
    };
    localStorage.setItem('Score', JSON.stringify({
      win: score.win,
      lost: score.lost,
      tie: score.tie
    }));
   document.querySelector('#user-move').innerText = '';
  document.querySelector('#computer-move').innerText = '';
  document.querySelector('#result').innerText = '';
  document.querySelector('#score').innerText = score.displayScore();
">Reset</button>

  <script>
    let scoreStr = localStorage.getItem('Score');
    let score;
    resetScore(scoreStr);

    function resetScore(scoreStr) {
      score = scoreStr ? JSON.parse(scoreStr) : {
        win: 0,
        lost: 0,
        tie: 0
      };
      score.displayScore = function () {
        return `No of matches Won: ${this.win}, Lost: ${this.lost}, Tie: ${this.tie}`;
      };
    }

    function generateComputerChoice() {
      let randomNumber = Math.random() * 3;
      if (randomNumber <= 1) {
        return 'Stone';
      } else if (randomNumber <= 2) {
        return 'Paper';
      } else {
        return 'Scissor';
      }
    }

    function getResult(userMove, computerMove) {
      if (userMove === 'Stone') {
        if (computerMove === 'Stone') {
          score.tie++;
          return `It's a tie`;
        } else if (computerMove === 'Paper') {
          score.lost++;
          return 'You Lose';
        } else {
          score.win++;
          return 'You Won';
        }
      } else if (userMove === 'Paper') {
        if (computerMove === 'Paper') {
          score.tie++;
          return `It's a tie`;
        } else if (computerMove === 'Stone') {
          score.win++;
          return 'You Won';
        } else {
          score.lost++;
          return 'You Lose';
        }
      } else { // Scissor
        if (computerMove === 'Scissor') {
          score.tie++;
          return `It's a tie`;
        } else if (computerMove === 'Paper') {
          score.win++;
          return 'You Won';
        } else {
          score.lost++;
          return 'You Lose';
        }
      }
    }

    function showResult(userMove, computerMove, result) {
      localStorage.setItem('Score', JSON.stringify({
        win: score.win,
        lost: score.lost,
        tie: score.tie
      }));
      document.querySelector('#user-move').innerText=userMove ? `You have chosen ${userMove}`:'';

      document.querySelector('#computer-move').innerText=computerMove ? `Computer choice is ${computerMove}` : '';

      document.querySelector('#result').innerText=result || '';
      document.querySelector('#score').innerText=score.displayScore();
      
    }
  </script>
</body>
</html>
